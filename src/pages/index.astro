---
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/landingPage.css";

import { withBase } from "../utils/utils";

const BASE_URL = import.meta.env.BASE_URL;
const baseNoTrailing =
  BASE_URL.endsWith("/") && BASE_URL !== "/" ? BASE_URL.slice(0, -1) : BASE_URL;


const plans = [
  {
    id: "standard",
    name: "Standard",
    price: "4,99 € / Monat",
    tagline: "Für den stressfreien Alltag.",
    icon: withBase("/media/images/product/standard_abo_icon.png"),
    features: [
      "Automatische Anmeldung zu LVAs/Prüfungen",
      "1 Universität / Account",
      "Erinnerungen & Status-Notifications",
      "Basis-Regelset (Zeitfenster, Gruppen, Wiederholungen)",
    ],
    primaryCta: { label: "Standard wählen", href: "/checkout" },
    secondaryCta: { label: "Details", href: "/abo/standard" },
    highlight: false,
  },
  {
    id: "premium",
    name: "Premium",
    price: "9,99 € / Monat",
    tagline: "Maximale Chance bei knappen Slots.",
    icon: withBase("/media/images/product/premium_abo_icon.png"),
    features: [
      "Alles aus Standard",
      "Mehrere Universitäten / Accounts",
      "Prioritätsmodus für zeitkritische Anmeldungen",
      "Kalender-Sync & erweiterte Regeln",
      "Priority Support",
    ],
    primaryCta: { label: "Premium wählen", href: "/checkout" },
    secondaryCta: { label: "Details", href: "/abo/premium" },
    highlight: true,
    badge: "Empfohlen",
  },
];

const title = "SlotBotBuddy – Dein Slot, automatisch gesichert";
const description =
  "SlotBotBuddy unterstützt dich bei zeitkritischen Anmeldungen zu Lehrveranstaltungen und Prüfungen – mit erlaubter Automatisierung über offizielle Schnittstellen.";
---

<BaseLayout title={title} description={description} showFooter={true}>
  <section class="hero">
    <div class="heroLeft">
      <h1>Dein Slot, automatisch gesichert.</h1>
      <p class="sub">
        SlotBotBuddy unterstützt dich bei zeitkritischen Anmeldungen zu
        Lehrveranstaltungen und Prüfungen — mit erlaubter Automatisierung über
        offizielle, öffentlich zugängliche Schnittstellen.
      </p>

      <div class="ctaRow">
        <a class="btn primary" href={withBase("/abo")}>Abo ansehen</a>
      </div>
    </div>

    <div class="miniPanel" aria-label="Kurzinfo">
      <div class="miniTitle">In 30 Sekunden startklar</div>
      <ul class="miniList">
        <li>Plan wählen</li>
        <li>LVAs/Prüfungen konfigurieren</li>
        <li>Automatisierung aktivieren</li>
      </ul>
    </div>
  </section>

  <section id="abo" class="abo">
    <div class="sectionHead">
      <h2>Abomodelle</h2>
      <p class="muted">Minimal, übersichtlich, jederzeit kündbar.</p>
    </div>

    <div class="grid">
      {
        plans.map((p) => (
          <article
            class={"card" + (p.highlight ? " highlight" : "")}
            aria-labelledby={`plan-${p.id}`}
          >
            {p.icon && (
              <img src={p.icon} alt="" class="planIcon" aria-hidden="true" />
            )}
            <div class="planRow">
              <h3 id={`plan-${p.id}`}>{p.name}</h3>
              {p.badge ? <span class="badge">{p.badge}</span> : null}
            </div>

            <div class="price">{p.price}</div>
            <div class="tagline">{p.tagline}</div>

            <ul class="features">
              {p.features.map((f) => (
                <li>
                  <span class="dot" aria-hidden="true" />
                  <span>{f}</span>
                </li>
              ))}
            </ul>

            <div class="cardCtas">
              <a
                class={"btn" + (p.highlight ? " success" : " primary")}
                href={withBase(p.primaryCta.href)}
                data-plan={p.id}
              >
                {p.primaryCta.label}
              </a>
              <a class="btn" href={withBase(p.secondaryCta.href)}>
                {p.secondaryCta.label}
              </a>
            </div>

            <p class="fine">
              Hinweis: SlotBotBuddy nutzt keine Fremdzugriffe auf Uni-Systeme
              und arbeitet nur im Rahmen erlaubter Automatisierung.
            </p>
          </article>
        ))
      }
    </div>
  </section>
</BaseLayout>


