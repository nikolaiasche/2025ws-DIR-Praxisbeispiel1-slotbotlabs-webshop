---
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/landingPage.css";

import { withBase } from "../utils/utils";

const BASE_URL = import.meta.env.BASE_URL;
const baseNoTrailing =
  BASE_URL.endsWith("/") && BASE_URL !== "/" ? BASE_URL.slice(0, -1) : BASE_URL;


const plans = [
  {
    id: "standard",
    name: "Standard",
    price: "4,99 € / Monat",
    tagline: "Nie mehr auf der Warteliste.",
    icon: withBase("/media/images/product/standard_abo_icon.png"),
    features: [
      "Automatische Anmeldung bei LVAs",
      "1 Universität pro Abo",
      "Konfiguration des Anmeldezeitpunkts",
      "Benachrichtigung über Erfolg und Misserfolg",
    ],
    primaryCta: { label: "Standard wählen", href: "/checkout" },
    secondaryCta: { label: "Details", href: "/abo/standard" },
    highlight: false,
  },
  {
    id: "premium",
    name: "Premium",
    price: "9,99 € / Monat",
    tagline: "Nie mehr den Prüfungstermin verpassen.",
    icon: withBase("/media/images/product/premium_abo_icon.png"),
    features: [
      "Enthält alle Funktionen des Standardmodells.",
      "Mehrere Universitäten pro Abo",
      "Tiefere Konfigurationsmöglichkeiten",
      "Anmeldung bei LVAs + Prüfungen",
    ],
    primaryCta: { label: "Premium wählen", href: "/checkout" },
    secondaryCta: { label: "Details", href: "/abo/premium" },
    highlight: true,
    badge: "Nutzerfavorit",
  },
];

const title = "SlotBotBuddy – Dein Buddy für überlaufene Lehrveranstaltungen.";
const description =
  "SlotBotBuddy unterstützt dich bei der Anmeldung zu Lehrveranstaltungen und Prüfungen, welche hoffnungslos überlaufen sind komplett automatisiert. Perfekt für Langschläfer.";
---

<BaseLayout title={title} description={description} showFooter={true}>
  <section class="hero">
    <div class="heroLeft">
      <h1>Dein Slot, automatisch gesichert.</h1>
      <p class="sub">
        SlotBotBuddy unterstützt dich bei der Anmeldung zu Lehrveranstaltungen und Prüfungen, welche hoffnungslos überlaufen sind komplett automatisiert und ohne frühes aufstehen.
      </p>

      <div class="ctaRow">
        <a class="btn primary" href={withBase("/abo")}>Abo ansehen</a>
      </div>
    </div>

    <div class="miniPanel" aria-label="Kurzinfo">
      <div class="miniTitle">In wenigen Sekunden einsatzbereit!</div>
      <ul class="miniList">
        <li>Plan wählen</li>
        <li>LVAs und Prüfungen konfigurieren</li>
        <li>Automatisierung aktivieren</li>
      </ul>
    </div>
  </section>

  <section id="abo" class="abo">
    <div class="sectionHead">
      <h2>Abomodelle</h2>
      <p class="muted">Standardmodel für Langschläfer</p>
    </div>

    <div class="grid">
      {
        plans.map((p) => (
          <article
            class={"card" + (p.highlight ? " highlight" : "")}
            aria-labelledby={`plan-${p.id}`}
          >
            {p.icon && (
              <img src={p.icon} alt="" class="planIcon" aria-hidden="true" />
            )}
            <div class="planRow">
              <h3 id={`plan-${p.id}`}>{p.name}</h3>
              {p.badge ? <span class="badge">{p.badge}</span> : null}
            </div>

            <div class="price">{p.price}</div>
            <div class="tagline">{p.tagline}</div>

            <ul class="features">
              {p.features.map((f) => (
                <li>
                  <span class="dot" aria-hidden="true" />
                  <span>{f}</span>
                </li>
              ))}
            </ul>

            <div class="cardCtas">
              <a
                class={"btn" + (p.highlight ? " success" : " primary")}
                href={withBase(p.primaryCta.href)}
                data-plan={p.id}
              >
                {p.primaryCta.label}
              </a>
              <a class="btn" href={withBase(p.secondaryCta.href)}>
                {p.secondaryCta.label}
              </a>
            </div>

            <p class="fine">
              Hinweis: SlotBotBuddy greift nicht auf das System der Universität zu und nutzt nur erlaubte Automatisierungsmechanismen sowie Schnittstellen.
            </p>
          </article>
        ))
      }
    </div>
  </section>
</BaseLayout>


